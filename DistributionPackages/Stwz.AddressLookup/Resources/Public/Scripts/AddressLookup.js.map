{
  "version": 3,
  "sources": ["../../Private/Fusion/AddressLookup.js"],
  "sourcesContent": ["document.addEventListener('alpine:init', () => {\n    Alpine.data('addresslookup', () => ({\n        \n        url: document.getElementById('addressLookup').dataset.url,\n        fatal: false,\n        error: false,\n        success: false,\n        loading: false,\n        response: '',\n\n        isReady: false,\n        rfcu_date: '',\n        rfcu_ready: '',\n        rollout_status: '',\n        acquisiton_status: '',\n        \n        user: {\n            first_name: '',\n            last_name: '',\n            email: ''\n        },\n\n        address: {\n            city: 'Zofingen',\n            country: '',\n            zip_code: '4800',\n            streetname: '',\n            house_number: '',\n            house_number_suffix: ''\n        },\n\n        validation: {\n            city: '',\n            street: '',\n            house_number: '',\n            required: {\n                message: 'Pflichtfeld'\n            }\n        },\n        \n        validate(field) {\n\n        },\n\n        check() {\n            if (!this.address.city.length){ this.validation.city = this.validation.required.message; } \n            if (!this.address.streetname.length){ this.validation.streetname = this.validation.required.message; } \n            if (!this.address.house_number.length){ this.validation.house_number = this.validation.required.message; return; } \n\n            this.loading = true;\n            console.log(this.url);\n            fetch(\n                this.url   +'?streetname='+ this.address.streetname \n                           +'&zip='+ this.address.zip_code \n                           +'&city='+ this.address.city \n                           +'&country='+ this.address.country\n                           +'&houseNumber='+ this.address.house_number \n                           +'&houseNumberSuffix='+ this.address.house_number_suffix\n                    ,{\n                        method: 'GET', \n                        headers: { 'Content-Type': 'application/json'}\n                    })\n                    .then(response => response.json())\n                    .then(data => {\n                        this.rfcu_date = data.data[0]['rfcu_date'],\n                        this.rfcu_ready = data.data[0]['rfcu_ready'],\n                        this.rollout_status = data.data[0]['rollout_status'],\n                        this.acquisiton_status = data.data[0]['acquisiton_status'];\n                        \n                        var today  = new Date();\n                        var objDate = new Date(this.rfcu_date);\n                        \n                        console.log(today.getTime());\n                        console.log(objDate.getTime());\n                        console.log(data.data[0]['rfcu_date']);\n                        if(objDate != 'null' && today.getTime() > objDate.getTime() && objDate.getTime() > 0){\n                            console.log(today.getTime());\n                            console.log(objDate.getTime());\n                            this.isReady = true;  \n                            console.log('Today is great!');\n                        }else{\n                            this.isReady = false;\n                            console.log('Today is not great!');\n                        }\n                        if(data.status == 'success' && this.isReady){\n                            this.loading = false;\n                            this.success = true;\n                            // this.success = false;\n                            this.error = !this.success;\n                            let event = new CustomEvent('addresslookup-success', {});\n                            window.dispatchEvent(event);\n                        }else{\n                            this.loading = false;\n                            this.success = false;\n                            this.error = !this.success;\n                            let event = new CustomEvent('addresslookup-error', {});\n                            window.dispatchEvent(event);\n                        }\n                        return data;\n                    })\n                    .catch(error => {\n                        // could be a custom message \n                        this.loading = false;\n                        this.success = false;\n                        this.error = !this.success;\n                        let event = new CustomEvent('addresslookup-error', {});\n                        window.dispatchEvent(event);\n                        return error;\n                    });\n        },\n\n            \n    }))\n  });"],
  "mappings": "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",
  "names": []
}

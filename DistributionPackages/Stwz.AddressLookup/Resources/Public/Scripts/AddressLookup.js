(()=>{document.addEventListener("alpine:init",()=>{Alpine.data("addresslookup",()=>({url:document.getElementById("addressLookup").dataset.url,fatal:!1,error:!1,success:!1,loading:!1,response:"",isReady:!1,rfcu_date:"",rfcu_ready:"",rollout_status:"",acquisiton_status:"",user:{first_name:"",last_name:"",email:""},address:{city:"Zofingen",country:"",zip_code:"4800",streetname:"",house_number:"",house_number_suffix:""},validation:{city:"",street:"",house_number:"",required:{message:"Pflichtfeld"}},validate(e){},check(){if(this.address.city.length||(this.validation.city=this.validation.required.message),this.address.streetname.length||(this.validation.streetname=this.validation.required.message),!this.address.house_number.length){this.validation.house_number=this.validation.required.message;return}this.loading=!0,console.log(this.url),fetch(this.url+"?streetname="+this.address.streetname+"&zip="+this.address.zip_code+"&city="+this.address.city+"&country="+this.address.country+"&houseNumber="+this.address.house_number+"&houseNumberSuffix="+this.address.house_number_suffix,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{this.rfcu_date=e.data[0].rfcu_date,this.rfcu_ready=e.data[0].rfcu_ready,this.rollout_status=e.data[0].rollout_status,this.acquisiton_status=e.data[0].acquisiton_status;var s=new Date,t=new Date(this.rfcu_date);if(console.log(s.getTime()),console.log(t.getTime()),console.log(e.data[0].rfcu_date),t!="null"&&s.getTime()>t.getTime()&&t.getTime()>0?(console.log(s.getTime()),console.log(t.getTime()),this.isReady=!0,console.log("Today is great!")):(this.isReady=!1,console.log("Today is not great!")),e.status=="success"&&this.isReady){this.loading=!1,this.success=!0,this.error=!this.success;let i=new CustomEvent("addresslookup-success",{});window.dispatchEvent(i)}else{this.loading=!1,this.success=!1,this.error=!this.success;let i=new CustomEvent("addresslookup-error",{});window.dispatchEvent(i)}return e}).catch(e=>{this.loading=!1,this.success=!1,this.error=!this.success;let s=new CustomEvent("addresslookup-error",{});return window.dispatchEvent(s),e})}}))});})();
//# sourceMappingURL=AddressLookup.js.map
